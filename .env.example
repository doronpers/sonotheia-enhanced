# Sonotheia Enhanced - Environment Configuration
# Copy this file to .env and configure as needed

# ============================================
# Application Mode
# ============================================
# CRITICAL: Set to false in production to enable security features!
DEMO_MODE=false

# ============================================
# Backend Configuration
# ============================================
# Backend API host and port
# SECURITY WARNING: 0.0.0.0 binds to all interfaces - use specific IP in production
BACKEND_HOST=0.0.0.0
BACKEND_PORT=8000

# Python environment
PYTHONUNBUFFERED=1

# SECRET_KEY for JWT signing and session management (REQUIRED in production)
# Generate with: python -c "import secrets; print(secrets.token_hex(32))"
# SECRET_KEY=

# Allowed hosts (comma-separated, REQUIRED in production)
# ALLOWED_HOSTS=localhost,127.0.0.1,yourdomain.com

# CORS Origins (comma-separated)
# CORS_ORIGINS=http://localhost:3000,https://yourdomain.com
# CORS_ALLOW_CREDENTIALS=true

# ============================================
# Frontend Configuration
# ============================================
# Frontend port
FRONTEND_PORT=3000

# Backend API URL (used by frontend)
REACT_APP_API_URL=http://localhost:8000

# ============================================
# Security (Production)
# ============================================
# CRITICAL: Set DEMO_MODE=false in production to enable security features
# DEMO_MODE=false

# API Keys for authentication
# Format: "key1:client1:tier1,key2:client2:tier2"
# Generate strong keys: python -c "import secrets; print(secrets.token_urlsafe(32))"
# API_KEYS=your-secure-api-key-here:client1:premium

# Demo API key (required when DEMO_MODE=true to enable API key authentication)
# Generate: python -c "import secrets; print(secrets.token_urlsafe(32))"
# DEMO_API_KEY=your-demo-key-here

# SECURITY BEST PRACTICES:
# 1. Always use HTTPS in production
# 2. Set DEMO_MODE=false in production
# 3. Use strong, randomly generated API keys
# 4. Regularly rotate API keys
# 5. Never commit .env file to version control
# 6. Use environment variables or secrets manager in cloud deployments

# ============================================
# Rate Limiting Configuration
# ============================================
# Enable/disable rate limiting (default: true)
RATE_LIMIT_ENABLED=true

# Storage backend: "memory" for development/single instance, "redis" for production/distributed
RATE_LIMIT_STORAGE=memory

# Redis connection URL (required when RATE_LIMIT_STORAGE=redis)
# RATE_LIMIT_REDIS_URL=redis://localhost:6379/0

# Default rate limit for endpoints without explicit limits
RATE_LIMIT_DEFAULT=100/minute

# Rate limit bypass key (for admin/testing - keep secret!)
# Generate: python -c "import secrets; print(secrets.token_urlsafe(32))"
# RATE_LIMIT_BYPASS_KEY=your-bypass-key-here

# Cleanup interval for in-memory storage (seconds)
RATE_LIMIT_CLEANUP_INTERVAL=60

# ============================================
# Redis Configuration (REQUIRED for Celery)
# ============================================
# Redis password (CRITICAL for security)
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(32))"
REDIS_PASSWORD=changeme_redis_password

# Celery broker and result backend URLs
CELERY_BROKER_URL=redis://:changeme_redis_password@localhost:6379/0
CELERY_RESULT_BACKEND=redis://:changeme_redis_password@localhost:6379/0

# ============================================
# Flower Monitoring (Optional)
# ============================================
# Flower dashboard credentials (REQUIRED if exposing Flower)
# SECURITY: Flower exposes sensitive task information - secure with auth!
FLOWER_USER=admin
FLOWER_PASSWORD=changeme_flower_password

# ============================================
# Database (Optional - for production)
# ============================================
# PostgreSQL with SSL for production
# DATABASE_URL=postgresql://user:password@localhost:5432/sonotheia?sslmode=require

# ============================================
# File Upload Configuration
# ============================================
# Maximum upload size in MB
# MAX_UPLOAD_SIZE_MB=50
# Allowed audio formats (comma-separated)
# ALLOWED_AUDIO_FORMATS=wav,mp3,flac,m4a

# ============================================
# Logging
# ============================================
# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO
